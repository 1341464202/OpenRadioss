//
// INTERFACE_LINKING_DISCRETE
//

ATTRIBUTES(COMMON) {

  IO_FLAG       = VALUE(INT, "Import/Export flag");
  _HMCOMMENTSFLAG   = VALUE(INT, "Write HM Comments");
  _HWCOLOR          = VALUE(INT, "Entity Color");  
  TITLE             = VALUE(STRING, "Title");
  DISC_TYPE          = VALUE(STRING, "TYPE_DISC_STR");
  
  entityid          =   VALUE(MULTIOBJECT,"NID/NSID") { SUBTYPES = (/SETS/SET_NODE_IDPOOL,  /NODE  ) ; } 
  entityid_type     =   VALUE(STRING, "Type of multi object");
  interfaceid       =   VALUE(INT,"Interface ID in interface file");
   
}

SKEYWORDS_IDENTIFIER(COMMON)
{
  IO_FLAG           = -1;
  _HMCOMMENTSFLAG   = -1;
  _HWCOLOR          = -1;
  TITLE             = -1;
  DISC_TYPE         = -1;
  entityid_type     = -1;
}

DEFAULTS(COMMON) 
{
  IO_FLAG = 0;
  _HMCOMMENTSFLAG = 0;
  entityid_type = "SETS/SET_NODE_IDPOOL";
}



GUI(COMMON) {
   //DATA(entityid) { SUBTYPES = ( /NODE , /SETS/SET_NODE_IDPOOL ) ;  }
}


FORMAT(Keyword971) {
 
  ASSIGN(IO_FLAG, 1, IMPORT);
  ASSIGN(IO_FLAG, 0, EXPORT);

  if(IO_FLAG == 1)
  {
     HEADER("*INTERFACE_LINKING_DISCRETE_%8s", DISC_TYPE);
  }
  
  if(IO_FLAG == 1 && DISC_TYPE == "NODE_SET")
  {
     ASSIGN(entityid_type, /SETS/SET_NODE_IDPOOL, IMPORT); 
     ASSIGN(entityid, 0, IMPORT); 
  }
  else if(IO_FLAG == 1)
  {
     ASSIGN(entityid_type, NODE, IMPORT); 
     ASSIGN(entityid, 0, IMPORT); 
  }
  
  
  //WRITE HEADER 
  if(IO_FLAG == 0 && (entityid_type == "/SETS/SET_NODE_IDPOOL" || entityid_type == "set"))
  {
     HEADER("*INTERFACE_LINKING_DISCRETE_NODE_SET");
  }
  else if(IO_FLAG == 0 && (entityid_type == "NODE" || entityid_type == "node"))
  {
     HEADER("*INTERFACE_LINKING_DISCRETE_NODE_NODE");
  }  


  //WRITE HEADER 
  if(IO_FLAG == 0 && (entityid_type == "/SETS/SET_NODE_IDPOOL" || entityid_type == "set"))
  {
     COMMENT("$     NSID      IFID");
  }
  else if(IO_FLAG == 0 && (entityid_type == "NODE" || entityid_type == "node"))
  {
     COMMENT("$      NID      IFID");
  }  
   
  CARD("%10d%10d",entityid, interfaceid);
}
