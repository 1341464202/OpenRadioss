//
// TERMINATION_DELETED_SHELLS
//

ATTRIBUTES(COMMON) {

  IO_FLAG           =   VALUE(INT, "Import/Export flag");
  _HMCOMMENTSFLAG   =   VALUE(INT, "Write HM Comments");
  _HWCOLOR          =   VALUE(INT, "Entity Color"); 
  TITLE             =   VALUE(STRING, "Title");
  COMP_TYPE         =   VALUE(STRING, "TYPE_COMP_STR");

  entityId          =   VALUE(MULTIOBJECT,"PID/PSID") { SUBTYPES = (/SETS/SET_PART_IDPOOL,  /COMPONENT  ) ; } 
  entityId_type     =   VALUE(STRING, "Type of multi object");
  nds               =   VALUE(INT,"Number of elements that must be deleted for the specified part ID's,before an error termination occurs");
   
}

SKEYWORDS_IDENTIFIER(COMMON)
{
  IO_FLAG           = -1;
  _HMCOMMENTSFLAG   = -1;
  _HWCOLOR          = -1;
  TITLE             = -1;
  COMP_TYPE         = -1;
  entityId_type     = -1;
}

DEFAULTS(COMMON) 
{
  IO_FLAG = 0;
  _HMCOMMENTSFLAG = 0;
  entityId_type = "/SETS/SET_PART_IDPOOL";
}

GUI(COMMON) {

}


FORMAT(Keyword971) {
 
  ASSIGN(IO_FLAG, 1, IMPORT);
  ASSIGN(IO_FLAG, 2, EXPORT);

  if(IO_FLAG == 1)
  {
     HEADER("*TERMINATION_DELETED_SHELLS%4s", COMP_TYPE);
  }

  if(IO_FLAG == 1 &&  COMP_TYPE == "_SET")
  {
     ASSIGN(entityId_type, /SETS/SET_PART_IDPOOL, IMPORT); 
     ASSIGN(entityId, 0, IMPORT); 
  }
  else if(IO_FLAG == 1)
  {
     ASSIGN(entityId_type, COMPONENT, IMPORT); 
     ASSIGN(entityId, 0, IMPORT); 
  }
  
  //WRITE HEADER 
  if(IO_FLAG == 2 && (entityId_type == "/SETS/SET_PART_IDPOOL" || entityId_type == "set"))
  {
     HEADER("*TERMINATION_DELETED_SHELLS_SET");
     COMMENT("$     PSID       NDS");
  }
  else if(IO_FLAG == 2 && (entityId_type == "COMPONENT" || entityId_type == "component"))
  {
     HEADER("*TERMINATION_DELETED_SHELLS");
     COMMENT("$      PID       NDS");
  }  
  
  CARD("%10d%10d",entityId, nds);
}
