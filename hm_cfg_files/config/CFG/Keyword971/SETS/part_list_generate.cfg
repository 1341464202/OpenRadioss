//
// Group Setup File
// *SET_PART_LIST_GENERATE
// 

// MCDS attributes description
ATTRIBUTES {
  // Access to nodes
// for gene 
    genemax                     =  SIZE("No. gene items "); 
    start                       =  ARRAY[genemax](INT, "Start id in clause range");
    end                         =  ARRAY[genemax](INT, "End id in clause range");
    by                          =  ARRAY[genemax](INT, "Incr by in clause range");
//
    LSD_DA1                     = VALUE(FLOAT, "First nodal attribute default value");
    LSD_DA2                     = VALUE(FLOAT, "Second nodal attribute default value");
    LSD_DA3                     = VALUE(FLOAT, "Third nodal attribute default value");
    LSD_DA4                     = VALUE(FLOAT, "Fourth nodal attribute default value");
    LSD_SET_SOLVER              = VALUE(STRING, "Name of solver using this set");
    LSD_COLLECT_OPT             = VALUE(INT, "Flag to set COLLECT");
//
    TITLE                       = VALUE(STRING, "TITLE");
    LSD_TitleOpt                = VALUE(INT, "Title");

//
    // HM INTERNAL
    set_Type                    = VALUE(STRING, "Set Type");
    option_Type                 = VALUE(STRING, "Set Type");
    KEY                         = VALUE(STRING, "header Type");
 /*   KEYWORD_STR               = VALUE(STRING, "Solver Keyword");*/
    NUM_COMMENTS                = SIZE("NUM_COMMENTS");
    CommentEnumField            = VALUE(INT,"User Comments");
    COMMENTS                    = ARRAY[NUM_COMMENTS](STRING,"Entity Comments");
    _IDPOOL                     = VALUE(INT, "Set Part Id pool");
    IO_FLAG                     = VALUE(INT, "Import/Export flag");
}
SKEYWORDS_IDENTIFIER(COMMON)
{   
 /*   KEYWORD_STR               = 9000;*/
    COMMENTS                    = 5109;
    CommentEnumField            = 7951;
    NUM_COMMENTS                = 5110;
    LSD_TitleOpt                = 90;
    LSD_DA1                     = 1901;
    LSD_DA2                     = 1901;
    LSD_DA3                     = 1901;
    LSD_DA4                     = 1901;
    LSD_SET_SOLVER              = 6254;
    set_Type                    = -1;
 /*   TITLE = -1;*/
    option_Type                 = -1;
    IO_FLAG                     =-1;
    LSD_COLLECT_OPT             = 9001;
    KEY                         = -1;
}
DEFAULTS(COMMON)
{
  _IDPOOL                       = 47;
  set_Type                      = "";
  LSD_TitleOpt                  = 0;
  LSD_SET_SOLVER                ="";
  LSD_COLLECT_OPT               = 0;
  KEY                           = "*SET_PART_LIST_GENERATE";
}

GUI(COMMON)
{
optional: 
 RADIO(set_Type)
 {
    ADD("", "SET_PART_LIST_GENERATE");
    ADD("INCREMENT", "SET_PART_LIST_GENERATE_INCREMENT"); 
 }
mandatory:
   SIZE(genemax) ;
   ARRAY(genemax,"") {
    SCALAR(start);
    SCALAR(end  );
    if(set_Type=="INCREMENT") { SCALAR(by   ); }
  }
optional:  
  FLAG(LSD_TitleOpt);
  FLAG(LSD_COLLECT_OPT);
    /*SCALAR(LSD_DA1);
    SCALAR(LSD_DA2);
    SCALAR(LSD_DA3);
    SCALAR(LSD_DA4);
    SCALAR(LSD_SET_SOLVER);*/
}

FORMAT(Keyword971) {
  ASSIGN(IO_FLAG, 1, IMPORT);
  ASSIGN(IO_FLAG, 0, EXPORT);
//import header and option
  if(IO_FLAG == 1)
  {
     HEADER("*SET_PART_LIST_GENERATE%s", option_Type);
  }
  ASSIGN(LSD_TitleOpt, _FIND(option_Type, "INCREMENT"),IMPORT);
  if(IO_FLAG == 1 && LSD_TitleOpt ==1 ) {
     ASSIGN(set_Type, INCREMENT,IMPORT);
  }
  ASSIGN(LSD_TitleOpt, _FIND(option_Type, "TITLE"),IMPORT);
  ASSIGN(LSD_COLLECT_OPT, _FIND(option_Type, "COLLECT"),IMPORT);
//export header
  ASSIGN(KEY,*SET_PART_LIST_GENERATE, EXPORT);
  if(IO_FLAG == 0 && set_Type == "INCREMENT")
  {
      ASSIGN(KEY,_COMBINE(KEY,"_INCREMENT"), EXPORT);
  }
  if(IO_FLAG == 0 && LSD_COLLECT_OPT == 1 )
  {
      ASSIGN(KEY,_COMBINE(KEY,"_COLLECT"), EXPORT);
  }
  if(IO_FLAG == 0 && LSD_TitleOpt == 1)
  {
      ASSIGN(KEY,_COMBINE(KEY,"_TITLE"), EXPORT);
  }
  if(IO_FLAG == 0)
  {
      HEADER("%s",KEY);
  }
  
  if(IO_FLAG == 0 && LSD_TitleOpt == 1)  
  {
        CARD("%-80s", TITLE);
  }
// card I/O
  COMMENT("$      SID       DA1       DA2       DA3       DA4    SOLVER");
  CARD("%10d%10lg%10lg%10lg%10lg%-10s",_ID_,LSD_DA1,LSD_DA2,LSD_DA3,LSD_DA4,LSD_SET_SOLVER);

  if (set_Type == "INCREMENT")
  {
      COMMENT("$     BBEG      BEND      INCR");
      FREE_CARD_LIST(genemax)
      {
            CARD("%10d%10d%10d",start,end,by); 
      }
  }
  else
  {
    COMMENT("$     BBEG      BEND      BBEG      BEND      BBEG      BEND      BBEG      BEND");
    FREE_CELL_LIST(genemax,"%10d%10d",start,end,80); 
  } 
}
